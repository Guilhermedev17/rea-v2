{"version":3,"sources":["../../../../src/components/layout/Header.jsx","../../../../node_modules/framer-motion/src/components/AnimatePresence/utils.ts","../../../../node_modules/framer-motion/src/utils/use-composed-ref.ts","../../../../node_modules/lucide-react/src/icons/x.ts","../../../../node_modules/lucide-react/src/icons/menu.ts","../../../../node_modules/framer-motion/src/components/AnimatePresence/PopChild.tsx","../../../../node_modules/framer-motion/src/components/AnimatePresence/PresenceChild.tsx","../../../../node_modules/framer-motion/src/components/AnimatePresence/index.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState } from 'react';\r\nimport Image from 'next/image';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { Zap, MessageCircle, Menu, X, Mail } from 'lucide-react';\r\n\r\n// Variantes de animação\r\nconst fadeInUp = {\r\n    initial: { opacity: 0, y: 30 },\r\n    animate: { opacity: 1, y: 0, transition: { duration: 0.5, ease: [0.25, 0.46, 0.45, 0.94] } }\r\n};\r\n\r\nconst scaleIn = {\r\n    initial: { opacity: 0, scale: 0.95 },\r\n    animate: { opacity: 1, scale: 1, transition: { duration: 0.4, ease: [0.25, 0.46, 0.45, 0.94] } }\r\n};\r\n\r\nconst staggerContainer = {\r\n    animate: { transition: { staggerChildren: 0.1, delayChildren: 0.3 } }\r\n};\r\n\r\nexport default function Header() {\r\n    const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);\r\n\r\n    const toggleMobileMenu = () => {\r\n        setIsMobileMenuOpen(!isMobileMenuOpen);\r\n    };\r\n\r\n    const scrollToSection = (sectionId) => {\r\n        const element = document.getElementById(sectionId);\r\n        if (element) {\r\n            const header = document.querySelector('header');\r\n            const headerHeight = header ? header.offsetHeight + 20 : 140;\r\n            const elementPosition = element.offsetTop - headerHeight;\r\n\r\n            window.scrollTo({\r\n                top: Math.max(0, elementPosition),\r\n                behavior: 'smooth'\r\n            });\r\n\r\n            // Close mobile menu if it's open\r\n            if (isMobileMenuOpen) {\r\n                setIsMobileMenuOpen(false);\r\n            }\r\n        }\r\n    };\r\n\r\n    const navLinks = [\r\n        { id: 'home', label: 'Início' },\r\n        { id: 'services', label: 'Serviços' },\r\n        { id: 'clients', label: 'Clientes' },\r\n        { id: 'about', label: 'Sobre' },\r\n        { id: 'contact', label: 'Contato' }\r\n    ];\r\n\r\n    return (\r\n        <motion.header\r\n            className=\"sticky top-0 z-50 w-full\"\r\n            initial={{ y: -100, opacity: 0 }}\r\n            animate={{ y: 0, opacity: 1 }}\r\n            transition={{ duration: 0.6, ease: [0.25, 0.46, 0.45, 0.94] }}\r\n        >\r\n            {/* Barra Superior - Logo e Informações */}\r\n            <motion.div\r\n                className=\"bg-white/95 backdrop-blur-sm border-b border-gray-200\"\r\n                initial={{ opacity: 0 }}\r\n                animate={{ opacity: 1 }}\r\n                transition={{ delay: 0.2, duration: 0.4 }}\r\n            >\r\n                <div className=\"container mx-auto px-4 py-2 md:py-1\">\r\n                    <motion.div\r\n                        className=\"flex items-center justify-between\"\r\n                        variants={staggerContainer}\r\n                        initial=\"initial\"\r\n                        animate=\"animate\"\r\n                    >\r\n                        <div className=\"flex items-center space-x-3 md:space-x-6\">\r\n                            <motion.div variants={scaleIn} className=\"transition-transform duration-300 hover:scale-105\">\r\n                                <Image\r\n                                    src=\"/rea_logo_nova_transparente.png\"\r\n                                    alt=\"R&A Logo\"\r\n                                    width={180}\r\n                                    height={48}\r\n                                    className=\"h-8 md:h-12 w-auto object-contain\"\r\n                                    priority\r\n                                />\r\n                            </motion.div>\r\n                            <motion.div\r\n                                className=\"hidden lg:flex items-center space-x-4 text-sm text-gray-600\"\r\n                                variants={fadeInUp}\r\n                            >\r\n                                <motion.div\r\n                                    className=\"flex items-center space-x-1 hover:text-blue-600 transition-colors duration-200\"\r\n                                    whileHover={{ scale: 1.05 }}\r\n                                >\r\n                                    <Zap className=\"w-4 h-4 text-blue-600\" />\r\n                                    <span>Especialistas em Linhas de Transmissão</span>\r\n                                </motion.div>\r\n                            </motion.div>\r\n                        </div>\r\n\r\n                        <motion.div\r\n                            className=\"flex items-center space-x-2 md:space-x-4\"\r\n                            variants={fadeInUp}\r\n                        >\r\n                            <a\r\n                                href=\"https://wa.me/27998746554\"\r\n                                target=\"_blank\"\r\n                                rel=\"noopener noreferrer\"\r\n                                className=\"hidden md:inline-flex items-center px-3 md:px-4 py-1.5 md:py-2 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 active:scale-95 font-semibold text-sm\"\r\n                            >\r\n                                <MessageCircle className=\"w-3 h-3 md:w-4 md:h-4 mr-1\" />\r\n                                WhatsApp\r\n                            </a>\r\n\r\n                            <button\r\n                                onClick={toggleMobileMenu}\r\n                                className=\"md:hidden p-2 rounded-lg hover:bg-gray-100 transition-colors duration-200\"\r\n                                aria-label={isMobileMenuOpen ? \"Fechar Menu\" : \"Abrir Menu\"}\r\n                            >\r\n                                {isMobileMenuOpen ? (\r\n                                    <X className=\"w-6 h-6 text-gray-800\" />\r\n                                ) : (\r\n                                    <Menu className=\"w-6 h-6 text-gray-600\" />\r\n                                )}\r\n                            </button>\r\n                        </motion.div>\r\n                    </motion.div>\r\n                </div>\r\n            </motion.div>\r\n\r\n            {/* Barra Inferior - Navegação Desktop */}\r\n            <motion.div\r\n                className=\"hidden md:block bg-gradient-to-r from-green-600 to-green-700 text-white\"\r\n                initial={{ opacity: 0, y: -20 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                transition={{ delay: 0.4, duration: 0.4 }}\r\n            >\r\n                <div className=\"container mx-auto px-4\">\r\n                    <motion.nav\r\n                        className=\"flex items-center space-x-6 lg:space-x-8 py-3\"\r\n                        variants={staggerContainer}\r\n                        initial=\"initial\"\r\n                        animate=\"animate\"\r\n                    >\r\n                        {navLinks.map((item) => (\r\n                            <motion.button\r\n                                key={item.id}\r\n                                onClick={() => scrollToSection(item.id)}\r\n                                className=\"hover:text-green-200 font-medium transition-opacity duration-200 relative group cursor-pointer text-sm md:text-base\"\r\n                                variants={fadeInUp}\r\n                                whileHover={{ y: -2 }}\r\n                            >\r\n                                {item.label}\r\n                                <span className=\"absolute bottom-0 left-0 w-0 h-0.5 bg-green-200 transition-all duration-200 group-hover:w-full\"></span>\r\n                            </motion.button>\r\n                        ))}\r\n                        <motion.a\r\n                            href=\"https://webmail.rea.srv.br/\"\r\n                            target=\"_blank\"\r\n                            rel=\"noopener noreferrer\"\r\n                            className=\"hover:text-green-200 font-medium transition-opacity duration-200 relative group text-sm md:text-base\"\r\n                            variants={fadeInUp}\r\n                            whileHover={{ y: -2 }}\r\n                        >\r\n                            Webmail\r\n                            <span className=\"absolute bottom-0 left-0 w-0 h-0.5 bg-green-200 transition-opacity duration-200 group-hover:w-full\"></span>\r\n                        </motion.a>\r\n                        <motion.div\r\n                            className=\"ml-auto hidden lg:block\"\r\n                            variants={fadeInUp}\r\n                        >\r\n                            <span className=\"text-green-200 text-sm\">Sooretama/ES</span>\r\n                        </motion.div>\r\n                    </motion.nav>\r\n                </div>\r\n            </motion.div>\r\n\r\n            {/* Dropdown - Navegação Mobile Direta */}\r\n            <AnimatePresence>\r\n                {isMobileMenuOpen && (\r\n                    <motion.div\r\n                        initial={{ height: 0, opacity: 0 }}\r\n                        animate={{ height: \"auto\", opacity: 1 }}\r\n                        exit={{ height: 0, opacity: 0 }}\r\n                        transition={{ duration: 0.3, ease: \"easeInOut\" }}\r\n                        className=\"md:hidden bg-white border-b border-gray-200 overflow-hidden shadow-lg\"\r\n                    >\r\n                        <div className=\"container mx-auto px-4 py-4 flex flex-col space-y-2\">\r\n                            {navLinks.map((item) => (\r\n                                <button\r\n                                    key={item.id}\r\n                                    onClick={() => scrollToSection(item.id)}\r\n                                    className=\"text-left py-3 px-4 text-gray-700 hover:text-green-600 hover:bg-green-50 rounded-lg font-medium transition-colors\"\r\n                                >\r\n                                    {item.label}\r\n                                </button>\r\n                            ))}\r\n                            <div className=\"h-px bg-gray-100 my-2\"></div>\r\n                            <a\r\n                                href=\"https://webmail.rea.srv.br/\"\r\n                                target=\"_blank\"\r\n                                rel=\"noopener noreferrer\"\r\n                                className=\"flex items-center py-3 px-4 text-gray-700 hover:text-green-600 hover:bg-green-50 rounded-lg font-medium transition-colors\"\r\n                            >\r\n                                <Mail className=\"w-5 h-5 mr-3 text-gray-400\" />\r\n                                Acessar Webmail\r\n                            </a>\r\n                            <a\r\n                                href=\"https://wa.me/27998746554\"\r\n                                target=\"_blank\"\r\n                                rel=\"noopener noreferrer\"\r\n                                className=\"flex items-center py-3 px-4 mt-2 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-lg font-medium\"\r\n                            >\r\n                                <MessageCircle className=\"w-5 h-5 mr-3\" />\r\n                                Falar no WhatsApp\r\n                            </a>\r\n                        </div>\r\n                    </motion.div>\r\n                )}\r\n            </AnimatePresence>\r\n        </motion.header>\r\n    );\r\n}\r\n","import { isValidElement, Children, ReactElement, ReactNode } from \"react\"\n\nexport type ComponentKey = string | number\n\nexport const getChildKey = (child: ReactElement<any>): ComponentKey =>\n    child.key || \"\"\n\nexport function onlyElements(children: ReactNode): ReactElement<any>[] {\n    const filtered: ReactElement<any>[] = []\n\n    // We use forEach here instead of map as map mutates the component key by preprending `.$`\n    Children.forEach(children, (child) => {\n        if (isValidElement(child)) filtered.push(child)\n    })\n\n    return filtered\n}\n","/**\n * Taken from https://github.com/radix-ui/primitives/blob/main/packages/react/compose-refs/src/compose-refs.tsx\n */\nimport * as React from \"react\"\n\ntype PossibleRef<T> = React.Ref<T> | undefined\n\n/**\n * Set a given ref to a given value\n * This utility takes care of different types of refs: callback refs and RefObject(s)\n */\nfunction setRef<T>(ref: PossibleRef<T>, value: T): void | (() => void) {\n    if (typeof ref === \"function\") {\n        return ref(value)\n    } else if (ref !== null && ref !== undefined) {\n        ;(ref as React.MutableRefObject<T>).current = value\n    }\n}\n\n/**\n * A utility to compose multiple refs together\n * Accepts callback refs and RefObject(s)\n */\nfunction composeRefs<T>(...refs: PossibleRef<T>[]): React.RefCallback<T> {\n    return (node) => {\n        let hasCleanup = false\n        const cleanups = refs.map((ref) => {\n            const cleanup = setRef(ref, node)\n            if (!hasCleanup && typeof cleanup === \"function\") {\n                hasCleanup = true\n            }\n            return cleanup\n        })\n        // React <19 will log an error to the console if a callback ref returns a\n        // value. We don't use ref cleanups internally so this will only happen if a\n        // user's ref callback returns a value, which we only expect if they are\n        // using the cleanup functionality added in React 19.\n        if (hasCleanup) {\n            return () => {\n                for (let i = 0; i < cleanups.length; i++) {\n                    const cleanup = cleanups[i]\n                    if (typeof cleanup === \"function\") {\n                        cleanup()\n                    } else {\n                        setRef(refs[i], null)\n                    }\n                }\n            }\n        }\n    }\n}\n\n/**\n * A custom hook that composes multiple refs\n * Accepts callback refs and RefObject(s)\n */\nfunction useComposedRefs<T>(...refs: PossibleRef<T>[]): React.RefCallback<T> {\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    return React.useCallback(composeRefs(...refs), refs)\n}\n\nexport { useComposedRefs }\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M18 6 6 18', key: '1bl5f8' }],\n  ['path', { d: 'm6 6 12 12', key: 'd8bk6v' }],\n];\n\n/**\n * @component @name X\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTggNiA2IDE4IiAvPgogIDxwYXRoIGQ9Im02IDYgMTIgMTIiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/x\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst X = createLucideIcon('x', __iconNode);\n\nexport default X;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M4 5h16', key: '1tepv9' }],\n  ['path', { d: 'M4 12h16', key: '1lakjw' }],\n  ['path', { d: 'M4 19h16', key: '1djgab' }],\n];\n\n/**\n * @component @name Menu\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNCA1aDE2IiAvPgogIDxwYXRoIGQ9Ik00IDEyaDE2IiAvPgogIDxwYXRoIGQ9Ik00IDE5aDE2IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/menu\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Menu = createLucideIcon('menu', __iconNode);\n\nexport default Menu;\n","\"use client\"\n\nimport { isHTMLElement } from \"motion-dom\"\nimport * as React from \"react\"\nimport { useContext, useId, useInsertionEffect, useRef } from \"react\"\n\nimport { MotionConfigContext } from \"../../context/MotionConfigContext\"\nimport { useComposedRefs } from \"../../utils/use-composed-ref\"\n\ninterface Size {\n    width: number\n    height: number\n    top: number\n    left: number\n    right: number\n    bottom: number\n}\n\ninterface Props {\n    children: React.ReactElement\n    isPresent: boolean\n    anchorX?: \"left\" | \"right\"\n    anchorY?: \"top\" | \"bottom\"\n    root?: HTMLElement | ShadowRoot\n    pop?: boolean\n}\n\ninterface MeasureProps extends Props {\n    childRef: React.RefObject<HTMLElement | null>\n    sizeRef: React.RefObject<Size>\n}\n\n/**\n * Measurement functionality has to be within a separate component\n * to leverage snapshot lifecycle.\n */\nclass PopChildMeasure extends React.Component<MeasureProps> {\n    getSnapshotBeforeUpdate(prevProps: MeasureProps) {\n        const element = this.props.childRef.current\n        if (element && prevProps.isPresent && !this.props.isPresent && this.props.pop !== false) {\n            const parent = element.offsetParent\n            const parentWidth = isHTMLElement(parent)\n                ? parent.offsetWidth || 0\n                : 0\n            const parentHeight = isHTMLElement(parent)\n                ? parent.offsetHeight || 0\n                : 0\n\n            const size = this.props.sizeRef.current!\n            size.height = element.offsetHeight || 0\n            size.width = element.offsetWidth || 0\n            size.top = element.offsetTop\n            size.left = element.offsetLeft\n            size.right = parentWidth - size.width - size.left\n            size.bottom = parentHeight - size.height - size.top\n        }\n\n        return null\n    }\n\n    /**\n     * Required with getSnapshotBeforeUpdate to stop React complaining.\n     */\n    componentDidUpdate() {}\n\n    render() {\n        return this.props.children\n    }\n}\n\nexport function PopChild({ children, isPresent, anchorX, anchorY, root, pop }: Props) {\n    const id = useId()\n    const ref = useRef<HTMLElement>(null)\n    const size = useRef<Size>({\n        width: 0,\n        height: 0,\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n    })\n    const { nonce } = useContext(MotionConfigContext)\n    /**\n     * In React 19, refs are passed via props.ref instead of element.ref.\n     * We check props.ref first (React 19) and fall back to element.ref (React 18).\n     */\n    const childRef =\n        (children.props as { ref?: React.Ref<HTMLElement> })?.ref ??\n        (children as unknown as { ref?: React.Ref<HTMLElement> })?.ref\n    const composedRef = useComposedRefs(ref, childRef)\n\n    /**\n     * We create and inject a style block so we can apply this explicit\n     * sizing in a non-destructive manner by just deleting the style block.\n     *\n     * We can't apply size via render as the measurement happens\n     * in getSnapshotBeforeUpdate (post-render), likewise if we apply the\n     * styles directly on the DOM node, we might be overwriting\n     * styles set via the style prop.\n     */\n    useInsertionEffect(() => {\n        const { width, height, top, left, right, bottom } = size.current\n        if (isPresent || pop === false || !ref.current || !width || !height) return\n\n        const x = anchorX === \"left\" ? `left: ${left}` : `right: ${right}`\n        const y = anchorY === \"bottom\" ? `bottom: ${bottom}` : `top: ${top}`\n\n        ref.current.dataset.motionPopId = id\n\n        const style = document.createElement(\"style\")\n        if (nonce) style.nonce = nonce\n\n        const parent = root ?? document.head\n        parent.appendChild(style)\n\n        if (style.sheet) {\n            style.sheet.insertRule(`\n          [data-motion-pop-id=\"${id}\"] {\n            position: absolute !important;\n            width: ${width}px !important;\n            height: ${height}px !important;\n            ${x}px !important;\n            ${y}px !important;\n          }\n        `)\n        }\n\n        return () => {\n            if (parent.contains(style)) {\n                parent.removeChild(style)\n            }\n        }\n    }, [isPresent])\n\n    return (\n        <PopChildMeasure isPresent={isPresent} childRef={ref} sizeRef={size} pop={pop}>\n            {pop === false\n                ? children\n                : React.cloneElement(children as any, { ref: composedRef })}\n        </PopChildMeasure>\n    )\n}\n","\"use client\"\n\nimport * as React from \"react\"\nimport { useId, useMemo } from \"react\"\nimport {\n    PresenceContext,\n    type PresenceContextProps,\n} from \"../../context/PresenceContext\"\nimport { VariantLabels } from \"../../motion/types\"\nimport { useConstant } from \"../../utils/use-constant\"\nimport { PopChild } from \"./PopChild\"\n\ninterface PresenceChildProps {\n    children: React.ReactElement\n    isPresent: boolean\n    onExitComplete?: () => void\n    initial?: false | VariantLabels\n    custom?: any\n    presenceAffectsLayout: boolean\n    mode: \"sync\" | \"popLayout\" | \"wait\"\n    anchorX?: \"left\" | \"right\"\n    anchorY?: \"top\" | \"bottom\"\n    root?: HTMLElement | ShadowRoot\n}\n\nexport const PresenceChild = ({\n    children,\n    initial,\n    isPresent,\n    onExitComplete,\n    custom,\n    presenceAffectsLayout,\n    mode,\n    anchorX,\n    anchorY,\n    root\n}: PresenceChildProps) => {\n    const presenceChildren = useConstant(newChildrenMap)\n    const id = useId()\n\n    let isReusedContext = true\n    let context = useMemo((): PresenceContextProps => {\n        isReusedContext = false\n        return {\n            id,\n            initial,\n            isPresent,\n            custom,\n            onExitComplete: (childId: string) => {\n                presenceChildren.set(childId, true)\n\n                for (const isComplete of presenceChildren.values()) {\n                    if (!isComplete) return // can stop searching when any is incomplete\n                }\n\n                onExitComplete && onExitComplete()\n            },\n            register: (childId: string) => {\n                presenceChildren.set(childId, false)\n                return () => presenceChildren.delete(childId)\n            },\n        }\n    }, [isPresent, presenceChildren, onExitComplete])\n\n    /**\n     * If the presence of a child affects the layout of the components around it,\n     * we want to make a new context value to ensure they get re-rendered\n     * so they can detect that layout change.\n     */\n    if (presenceAffectsLayout && isReusedContext) {\n        context = { ...context }\n    }\n\n    useMemo(() => {\n        presenceChildren.forEach((_, key) => presenceChildren.set(key, false))\n    }, [isPresent])\n\n    /**\n     * If there's no `motion` components to fire exit animations, we want to remove this\n     * component immediately.\n     */\n    React.useEffect(() => {\n        !isPresent &&\n            !presenceChildren.size &&\n            onExitComplete &&\n            onExitComplete()\n    }, [isPresent])\n\n    children = (\n        <PopChild pop={mode === \"popLayout\"} isPresent={isPresent} anchorX={anchorX} anchorY={anchorY} root={root}>\n            {children}\n        </PopChild>\n    )\n\n    return (\n        <PresenceContext.Provider value={context}>\n            {children}\n        </PresenceContext.Provider>\n    )\n}\n\nfunction newChildrenMap(): Map<string, boolean> {\n    return new Map()\n}\n","\"use client\"\n\nimport * as React from \"react\"\nimport { useContext, useMemo, useRef, useState } from \"react\"\nimport { LayoutGroupContext } from \"../../context/LayoutGroupContext\"\nimport { useConstant } from \"../../utils/use-constant\"\nimport { useIsomorphicLayoutEffect } from \"../../utils/use-isomorphic-effect\"\nimport { PresenceChild } from \"./PresenceChild\"\nimport { AnimatePresenceProps } from \"./types\"\nimport { usePresence } from \"./use-presence\"\nimport { ComponentKey, getChildKey, onlyElements } from \"./utils\"\n\n/**\n * `AnimatePresence` enables the animation of components that have been removed from the tree.\n *\n * When adding/removing more than a single child, every child **must** be given a unique `key` prop.\n *\n * Any `motion` components that have an `exit` property defined will animate out when removed from\n * the tree.\n *\n * ```jsx\n * import { motion, AnimatePresence } from 'framer-motion'\n *\n * export const Items = ({ items }) => (\n *   <AnimatePresence>\n *     {items.map(item => (\n *       <motion.div\n *         key={item.id}\n *         initial={{ opacity: 0 }}\n *         animate={{ opacity: 1 }}\n *         exit={{ opacity: 0 }}\n *       />\n *     ))}\n *   </AnimatePresence>\n * )\n * ```\n *\n * You can sequence exit animations throughout a tree using variants.\n *\n * If a child contains multiple `motion` components with `exit` props, it will only unmount the child\n * once all `motion` components have finished animating out. Likewise, any components using\n * `usePresence` all need to call `safeToRemove`.\n *\n * @public\n */\nexport const AnimatePresence = ({\n    children,\n    custom,\n    initial = true,\n    onExitComplete,\n    presenceAffectsLayout = true,\n    mode = \"sync\",\n    propagate = false,\n    anchorX = \"left\",\n    anchorY = \"top\",\n    root\n}: React.PropsWithChildren<AnimatePresenceProps>) => {\n    const [isParentPresent, safeToRemove] = usePresence(propagate)\n\n    /**\n     * Filter any children that aren't ReactElements. We can only track components\n     * between renders with a props.key.\n     */\n    const presentChildren = useMemo(() => onlyElements(children), [children])\n\n    /**\n     * Track the keys of the currently rendered children. This is used to\n     * determine which children are exiting.\n     */\n    const presentKeys =\n        propagate && !isParentPresent ? [] : presentChildren.map(getChildKey)\n\n    /**\n     * If `initial={false}` we only want to pass this to components in the first render.\n     */\n    const isInitialRender = useRef(true)\n\n    /**\n     * A ref containing the currently present children. When all exit animations\n     * are complete, we use this to re-render the component with the latest children\n     * *committed* rather than the latest children *rendered*.\n     */\n    const pendingPresentChildren = useRef(presentChildren)\n\n    /**\n     * Track which exiting children have finished animating out.\n     */\n    const exitComplete = useConstant(() => new Map<ComponentKey, boolean>())\n\n    /**\n     * Track which components are currently processing exit to prevent duplicate processing.\n     */\n    const exitingComponents = useRef(new Set<ComponentKey>())\n\n    /**\n     * Save children to render as React state. To ensure this component is concurrent-safe,\n     * we check for exiting children via an effect.\n     */\n    const [diffedChildren, setDiffedChildren] = useState(presentChildren)\n    const [renderedChildren, setRenderedChildren] = useState(presentChildren)\n\n    useIsomorphicLayoutEffect(() => {\n        isInitialRender.current = false\n        pendingPresentChildren.current = presentChildren\n\n        /**\n         * Update complete status of exiting children.\n         */\n        for (let i = 0; i < renderedChildren.length; i++) {\n            const key = getChildKey(renderedChildren[i])\n\n            if (!presentKeys.includes(key)) {\n                if (exitComplete.get(key) !== true) {\n                    exitComplete.set(key, false)\n                }\n            } else {\n                exitComplete.delete(key)\n                exitingComponents.current.delete(key)\n            }\n        }\n    }, [renderedChildren, presentKeys.length, presentKeys.join(\"-\")])\n\n    const exitingChildren: any[] = []\n\n    if (presentChildren !== diffedChildren) {\n        let nextChildren = [...presentChildren]\n\n        /**\n         * Loop through all the currently rendered components and decide which\n         * are exiting.\n         */\n        for (let i = 0; i < renderedChildren.length; i++) {\n            const child = renderedChildren[i]\n            const key = getChildKey(child)\n\n            if (!presentKeys.includes(key)) {\n                nextChildren.splice(i, 0, child)\n                exitingChildren.push(child)\n            }\n        }\n\n        /**\n         * If we're in \"wait\" mode, and we have exiting children, we want to\n         * only render these until they've all exited.\n         */\n        if (mode === \"wait\" && exitingChildren.length) {\n            nextChildren = exitingChildren\n        }\n\n        setRenderedChildren(onlyElements(nextChildren))\n        setDiffedChildren(presentChildren)\n\n        /**\n         * Early return to ensure once we've set state with the latest diffed\n         * children, we can immediately re-render.\n         */\n        return null\n    }\n\n    if (\n        process.env.NODE_ENV !== \"production\" &&\n        mode === \"wait\" &&\n        renderedChildren.length > 1\n    ) {\n        console.warn(\n            `You're attempting to animate multiple children within AnimatePresence, but its mode is set to \"wait\". This will lead to odd visual behaviour.`\n        )\n    }\n\n    /**\n     * If we've been provided a forceRender function by the LayoutGroupContext,\n     * we can use it to force a re-render amongst all surrounding components once\n     * all components have finished animating out.\n     */\n    const { forceRender } = useContext(LayoutGroupContext)\n\n    return (\n        <>\n            {renderedChildren.map((child) => {\n                const key = getChildKey(child)\n\n                const isPresent =\n                    propagate && !isParentPresent\n                        ? false\n                        : presentChildren === renderedChildren ||\n                          presentKeys.includes(key)\n\n                const onExit = () => {\n                    if (exitingComponents.current.has(key)) {\n                        return\n                    }\n                    exitingComponents.current.add(key)\n\n                    if (exitComplete.has(key)) {\n                        exitComplete.set(key, true)\n                    } else {\n                        return\n                    }\n\n                    let isEveryExitComplete = true\n                    exitComplete.forEach((isExitComplete) => {\n                        if (!isExitComplete) isEveryExitComplete = false\n                    })\n\n                    if (isEveryExitComplete) {\n                        forceRender?.()\n                        setRenderedChildren(pendingPresentChildren.current)\n\n                        propagate && safeToRemove?.()\n\n                        onExitComplete && onExitComplete()\n                    }\n                }\n\n                return (\n                    <PresenceChild\n                        key={key}\n                        isPresent={isPresent}\n                        initial={\n                            !isInitialRender.current || initial\n                                ? undefined\n                                : false\n                        }\n                        custom={custom}\n                        presenceAffectsLayout={presenceAffectsLayout}\n                        mode={mode}\n                        root={root}\n                        onExitComplete={isPresent ? undefined : onExit}\n                        anchorX={anchorX}\n                        anchorY={anchorY}\n                    >\n                        {child}\n                    </PresenceChild>\n                )\n            })}\n        </>\n    )\n}\n"],"names":[],"mappings":"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","ignoreList":[1,2,3,4,5,6,7]}